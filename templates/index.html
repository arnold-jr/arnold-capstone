{% extends "base.html" %}
{% set active_page = "index" %}
{% block title %}AmeniDC Home{% endblock %}
{% block head %}
  {{ super() }}

  <!-- Bokeh resources -->
  {{ js_resources|indent(4)|safe }}
  {{ css_resources|indent(4)|safe }}
  {{ bokeh_script|indent(4)|safe }}
  
  <!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script-->
  
  <style>
    #bokeh_plot {
      margin: auto;
      width: 80%;
      visibility: {{ bp_visibility }} ; 
    }
    #address {
      width: 50%;
    }
  </style>
  
  <style>
    #map {
      margin-left: auto; 
      margin-right:auto;
      height: 70vh; 
      width: 70vw; 
    }
    #layer_selector {
      padding: 5px;
    }
    #layer_selector ul {
      padding: 0; margin: 0;
      list-style-type: none;
    }
    #layer_selector li {
      border-bottom: 1px solid #999;
      padding: 15px 30px;
      font-family: "Helvetica", Arial;
      font-size: 13px;
      color: #444;
      cursor: auto;
    }
    #layer_selector li:hover {
      background-color: #F0F0F0;
      cursor: pointer;
    }
    #layer_selector li.selected {
      background-color: #EEE;
    }
  </style>
    
  <!-- include cartodb.js library -->
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js">
  </script>

{% endblock head %}
{% block content %}
  <!-- Main jumbotron for a primary marketing message or call to action -->
  <div class="jumbotron">
    <div class="container">
      <h1>AmeniDC</h1>
      <p> See the cost of living near amenities in the District of 
          Columbia
      </p>
    </div>
  </div> <!--jumbotron-->

  <div class="container" style="margin:auto; margin-top:1%; width:90%">
    <h5>Use the toolbar on the right to view zip code properties. Layers
      correspond to mean sale price, and average number of groceries, 
      restaurants, and Metro stations within a 1 km radius. Click on 
      a particular zipcode to see the stats of more amenities.</h5>
    <table>
      <tr>
        <td id="map"></td>
        <td id="layer_selector" class="cartodb-infobox">
          <ul>
            {% for db_name, disp_name in map_layers %}
            {# if db_name=="0" <li data="all" class="selected">All countries</li> #}
              <li data="{{ db_name }}">{{ disp_name }}</li>
            {% endfor %}
          </ul>
        </td>
      </tr>
    </table>

    <script type="text/javascript">
      var carto = {{ cartodb_map|tojson }};
      {% include "cartodb_amenidc.js" %} 
    </script>
  </div> 
  
  
  <div class="container" style="margin:auto; margin-top:5%; width:90%">
    <!-- Put the address query form here -->
    <h5> Enter a DC street address below to see a predicted sale price
    and how the location stacks up against other properties in its
    zipcode. </h5>
    {% from "_formhelpers.html" import render_field %}
    <form method=post action="/index" role="form">
      <dl>
        {{ render_field(form.address) }}
        <i>(e.g., 1600 Pennsylvania Ave)</i>
      </dl>
    </form>    
    
    <!-- Put the Bokeh plots here -->
    <div id="bokeh_plot" >
      <!--h2 style="text-align: center;">{{ amenity_x_disp }}</h2-->
        {{ bokeh_div|indent(4)|safe }}
    </div>
  </div>
  
  <hr>

  
  
    
{% endblock content%}
